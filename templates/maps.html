<!DOCTYPE html>
<html lang="en">

<head>
	<!-- Required meta tags -->
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm"
	 crossorigin="anonymous">
	<style>
		#map {
			height: 840px;
			/* The height is 400 pixels */
			width: 100%;
			/* The width is the width of the web page */
		}

		main {
			display: flex;
			flex-direction: column;
			justify-content: center;
			align-items: center;
		}

		.search-box {
			z-index: 1;
			position: absolute;
			top: 10%;
		}

		#address {
			width: 400px;
		}
	</style>
</head>

<body style="background-color:#606982">
	<nav class="navbar navbar-expand-sm  navbar-dark" style="background-color:#A5ABBD;">
		<a class="navbar-brand" href="/">
			<img src="https://lh3.googleusercontent.com/MalKOxfAjD54Qm_nq_DvlQfdn9DC1kkVivCczPgJVH1aWxBdRAl-bEmszwVO359AdJoNelYh_HtOFUOvvzUo74KGlMd6P6x3QOQNx9waQdyGD_xlggl5dfHn580n3bK7U0Zpd4Eeu6UgOx1HMQdvOrc1y0SmWCNSo2JJR31sfQhfFsoWcupaOyel0Fk4AEYNKNtD6F3ODERrF-ioTjfRe_33YZGfHPmwqlzKXivOhQouyTKl6PPrMX3iE60z0SftiTa22MkHAuFfNyQViuzl55OGUX1fHJm85np0JxXrxzk0OZWx317f7r006eN14qv7DvM4DiIINjcpWa2qj-RlXXmk4xabvm0juEd8EUhBcbJXq-8zpiZUI-HntgzRBwRycfXh0H_uzxpugeSj76xunESC6-7p8iu7sfVGlFqyEVJE2ny4OpI7UeYLRKYscW6PkXg65NRa0HKFZ6HF2Mzwl3aBvttMvisUsBFV25LG0DWwHp03-IAf0x0bREpem67tNl9gWrz-Nr8oSNbPqeegppA4qxg3-x02TK5nScZmaoC_dFzabHHW0tGyX5_DaRyoHlJ_ACtnf9pqx0_OS04mA4GHksnDsVs2hzu5mA6tFiqNeBsJTmW9nCd1v5afvJJ-r8HZtE1vjXUyYSefSWUg5kRJX-L2qpNhGPtHeCRuFuwA1YarXgfIX08xN1A9x0FBZrGZzpfmoPrzIhwOtdiflV71=w423-h302-no?authuser=1" alt="logo" style="width:100px;" />
    </a>

    <ul class="navbar-nav">
      <li class="nav-item">
        <a class="nav-link " href="/" style="color:"> Welcome </a>
      </li>
      <li class="nav-item">
        <a class="nav-link active" href="#"> Maps </a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="/events"> Events </a>
      </li>
    </ul>

    <div class="col" style="margin-left: 45em">
      <script async src="https://cse.google.com/cse.js?cx=6e78ff24267732b82"></script>
      <div class="gcse-search"></div>
    </div>
  </nav>

  <main>
    <div class="search-box">
      <input id="address" type="textbox" value="">
      <input type="button" value="Search" onclick="codeAddress()">
    </div>
    <div id="map"></div>
  </main>

  <footer class="container">
    <p style="text-align: center">
      <img src="https://lh3.googleusercontent.com/MalKOxfAjD54Qm_nq_DvlQfdn9DC1kkVivCczPgJVH1aWxBdRAl-bEmszwVO359AdJoNelYh_HtOFUOvvzUo74KGlMd6P6x3QOQNx9waQdyGD_xlggl5dfHn580n3bK7U0Zpd4Eeu6UgOx1HMQdvOrc1y0SmWCNSo2JJR31sfQhfFsoWcupaOyel0Fk4AEYNKNtD6F3ODERrF-ioTjfRe_33YZGfHPmwqlzKXivOhQouyTKl6PPrMX3iE60z0SftiTa22MkHAuFfNyQViuzl55OGUX1fHJm85np0JxXrxzk0OZWx317f7r006eN14qv7DvM4DiIINjcpWa2qj-RlXXmk4xabvm0juEd8EUhBcbJXq-8zpiZUI-HntgzRBwRycfXh0H_uzxpugeSj76xunESC6-7p8iu7sfVGlFqyEVJE2ny4OpI7UeYLRKYscW6PkXg65NRa0HKFZ6HF2Mzwl3aBvttMvisUsBFV25LG0DWwHp03-IAf0x0bREpem67tNl9gWrz-Nr8oSNbPqeegppA4qxg3-x02TK5nScZmaoC_dFzabHHW0tGyX5_DaRyoHlJ_ACtnf9pqx0_OS04mA4GHksnDsVs2hzu5mA6tFiqNeBsJTmW9nCd1v5afvJJ-r8HZtE1vjXUyYSefSWUg5kRJX-L2qpNhGPtHeCRuFuwA1YarXgfIX08xN1A9x0FBZrGZzpfmoPrzIhwOtdiflV71=w423-h302-no?authuser=1" >
    </p>
  </footer>


  <script
    src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCC9ZE-V_npG11EYzzxAGgygIMBDLfY1fY&callback=initMap&libraries=&v=weekly"
    async
  ></script>
  <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>
  <script type="text/javascript">
    const uluru = { lat: 37.5, lng: 239.4762 };
    let locations = [];
    let geocoder;
    let map;

    // Initialize and add the map 
    function initMap() {
      // The map, centered at Merced
      map = new google.maps.Map(document.getElementById("map"), {
        zoom: 8,
        center: uluru,
      })

      geocoder = new google.maps.Geocoder();
    }

    function codeAddress() {
      var address = document.getElementById('address').value;
      var markerQuestion = window.prompt("Do you want this to be a marker? ");

      if (
        (markerQuestion == "yes") || 
        (markerQuestion == "y") || 
        (markerQuestion == "Y") || 
        (markerQuestion == "YES")) {
        
        var reason = window.prompt("What is going on in that area? ");
        var time = window.prompt("What date/time is the event?");
        var name = window.prompt("What is your name?");
        var email = window.prompt("What is your email?");

        fetch("https://instarally.iscaisfire.repl.co/location_update", {
          method: 'POST', // or 'PUT'
          headers: {
            'Content-Type': 'application/json',
          },
          body: JSON.stringify({
            address: address, 
            reason: reason, 
            time: time, 
            name: name, 
            email: email
          }),
        })
        .then(response => console.log(response));
        
        geocoder.geocode({ 'address': address}, function(results, status) {
          if (status == 'OK') {
            map.setCenter(results[0].geometry.location); //Centers map
            var marker = new google.maps.Marker({ //Creates market
                map: map,
                position: results[0].geometry.location 
            });
          } else {
              alert('Geocode was not successful for the following reason: ' + status);
          }
        });
      } else {
        geocoder.geocode({ 'address': address}, function(results, status) {
          if (status == 'OK') {
            map.setCenter(results[0].geometry.location); //Sets center of map
          }
        });
      }
    }
  </script>
</body>

</html>